{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-4">
            <div class="card shadow">
                <div class="card-body text-center">
                    <h3>Match Score</h3>
                    <div class="display-4 text-primary font-weight-bold">
                        {{ analysis.overall_match_score }}%
                    </div>
                    <hr>
                    <p>Skill Match: {{ analysis.section_match_score.Skill_Match }}%</p>
                    <p>Impact Score: {{ analysis.section_match_score.Impact_Score }}%</p>
                </div>
            </div>
            
            <div class="card shadow mt-4">
                <div class="card-header bg-danger text-white">
                    <h5>Missing Skills</h5>
                </div>
                <ul class="list-group list-group-flush">
                    {% for skill in analysis.missing_keywords %}
                        <li class="list-group-item text-danger">{{ skill }}</li>
                    {% empty %}
                        <li class="list-group-item text-success">No missing skills found!</li>
                    {% endfor %}
                </ul>
            </div>

            <div class="card shadow mt-4">
                <div class="card-header bg-warning">
                    <h5>Improvement Suggestions</h5>
                </div>
                <ul class="list-group list-group-flush">
                    {% for suggestion in analysis.improved_suggestion %}
                        <li class="list-group-item"><small>{{ suggestion }}</small></li>
                    {% empty %}
                        <li class="list-group-item text-success">Great formatting!</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h4>Resume Analysis: {{ analysis.parsed_resume_data.full_name }}</h4>
                </div>
                <div class="card-body">
                    <h5>Professional Summary</h5>
                    <p>{{ analysis.parsed_resume_data.summary }}</p>
                    <hr>

                    <h5>Work Experience</h5>
                    {% for job in analysis.parsed_resume_data.work_experience %}
                        <div class="mb-3">
                            <strong>{{ job.role }}</strong> at <span class="text-muted">{{ job.company }}</span>
                            <br>
                            <small class="text-muted">{{ job.duration }}</small>
                            <ul>
                                {% for achievement in job.key_achievements %}
                                    <li>{{ achievement }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    {% endfor %}
                    <hr>

                    <h5>Projects</h5>
                    {% for project in analysis.parsed_resume_data.projects %}
                        <div class="mb-3">
                            <strong>{{ project.name }}</strong>
                            <p>{{ project.description }}</p>
                            <small class="text-primary">Tech: {{ project.technologies|join:", " }}</small>
                        </div>
                    {% endfor %}
                </div>
            </div>
            
            <div class="mt-4 text-right">
                <a href="#" class="btn btn-lg btn-success">Start AI Interview Simulation &rarr;</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}